language: node_js
node_js:
- 8.4.0
sudo: required
before_install:
- sudo rm /usr/local/bin/docker-compose
- curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname
  -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
- docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
install:
- mvn install -Dmaven.javadoc.skip=true -B -V
- ls -l
- docker build --build-arg JAR_FILE=/target/backend.jar -t tookaa2/se234-project-backend  .
- docker push tookaa2/se234-project-backend
- docker pull tookaa2/se234-project-backend
script:
- docker-compose -H "$DOCKER_HOST" up -d
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: m5iRlM4pXGbJdYxsU9Vt3Y8Xdz4/U0DxR01YRgNhG9EZCgzqTZ9stoCEpTWH4uDEsO047vNhfwMCiLzvyEIxzoBuBfxxq+6R5QQwLKFpo1Aearcg1d3IbIY3R/zkRYbaN6MIrVP+OnCNdwxKCLVeQMjPn1GwfZVppa0P0d4Sh/pfec69142mEFujHxSP3EZQCvFjgtU9gJ3drtePTyGWnIaiQYj9vjF/LormCqc3sWLaoEXo2fhQlMSvTNXbjk60NjpZg43Nh7cGgK1zd0pXA20nyIubzpPG0+UI0lkDFtabXL0QPEYxcyxD4HGHsV9ZXf1JcmtmEGqGj5pUFZ/c952Jd61db6kRyeoUCkEhR+uau8w5x7fIpZFtZf5xn64AKYLfWnjyc5b2MQQwytBJHGFimoopqwvEmNuowPGmhvyoSixzS9+iZWFFWwgeDdQEI7KJDUrQ+Qjq+VSuIIxKxvEBc8nUSMAQbNScZwrpcHVNT8/KudfXx604GTKhFc0K9qC7DssMAbf3TIfn8/Owq9LgylrY7O4er2JsMl5btq4cJtMyXRlP6Ht6Mt5PnDwOxWVaQ/ckQkPBw4YjXsYt2P/tnEpzE3T5YItWXZMb0Nc6TstA6X88SnvdnJOKcrY6VB+IUevQ6RZ1Dj95sXZbd40qmHEu4doyqBa3Wu2VOd8=
  - secure: aXTgdnGqWMKFa8keizf1/3H4jvkFBYRkm6oZMhHTb8FZqa/tdlDvRc+duyApvxDPi52Z77Vefg7zcVKY2GavHTcbBOFrC3OqhRFBmykwvIEojUQ9g7R8t/hIDT4pYixbUg2xbpIpAwfY3jnUGGbj2/ls5kRxF+SSfxr6w/255qHTKuQ2vGlZE2NwBHOHU4omj/Ys4hoPcV6AD0LeJTxCWLW4UAsGktrC+IUmCEzsFkggTb+fLYsXEBi0xQNRdEmamIXC7iNuDMC8W2WX+U26+b0z2vsKVau4kPIFBVSeH2Tho0eyp/VgUfqSPw9e0HnQbfA+DRSRDGYclGKCUZtHJi+VNBTQNBC9xzEstmcK3PALoAMqFtRdmEJOzFzLEz6KDU6BVkW2HZkjJuaYJWV4NEjKWlgUkgef+7ocG4X4i/BRmoiAu7Ac1uTbe4IEr0ZeM93u6Gn4nXCY0I7kg2IiFTMbVla1wlU2zEETcZk1XCCpf+eFVM9nV1VEzphwdViQbQHQjYyzh4/H22Tb+NiHa9xKZNrlHv5mA+vcA6pTMujxEx8DrQ1dwLYCgRDkoymy2QJDYwSb+y59HX4NIwfvvmHYUbgslDqmlO/B8/GySvm20LbTbkuGjLnRMylcDl5VOYVhnSNqehCPUgo0AqPxPY0gwvYqO2Czj6U1UduCfWQ=
  - DOCKER_COMPOSE_VERSION=1.20.0
  - secure: jNpeu8MFhR4OSrOh/kfpF81i+p35vW2MTYnk9A/xwebEqmEB32ZHjo8EA2LT4MDkLgYwQt344oF8aYBH9e5qY34NTX1X/6sxVpKd8/ob+h9Sgk9CzR3/mI+imWLcbPNrTW2W+tUHIfIaG1U49axzfgnjAoJxmNUASdGpIzNPAhVyG+brKLir6IY+7oLMLMi3UFXWcgLrjD2jZwkbjdtnS4pXrv9rr9+HHvp9swBhaIioL14E3hv5J2it2rtrURP1iednUJ3ekmfuustTJy8Be3J5ekyZbkP/88xmOr3pFETGeRD59J/xpq/nn4a6xlczf1i76nUsl/Pkj4S07Zir93XwPhYtiwUklFMoXlXlFOIGUyQqvK7/K8mSt3g84CKihCU5oEZIjhmCe7Bsfw0WfFrGBpTUZyLhWE61xiv5uNVd1N1F06XZDlA/qubFUYV/iRo3ttyhk4885NHT/stoP+B7af5BArH9GsBLOMu9g/OyGydEra32IQ075hviMmcvx3mWLYH72DmY6q/Cxzd03758lFmInA5uocOO8tiABeQXc50ZAHMRMADB9NkyjGbvD/VlCmQ1NO5W8ppimc+zRIRwIkCKVWd8bBYujXudfX5IgfedeJiTHwepfABH2UKMZ7eClvmHPsiYnVWLuwdoGLf0XtU7fVcehpgGc5INVSM=
